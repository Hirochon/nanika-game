# Redis Configuration for Development
# Nanika Game - Optimized for WebSocket sessions and caching

#------------------------------------------------------------------------------
# NETWORK
#------------------------------------------------------------------------------
bind 0.0.0.0
port 6379
timeout 300
tcp-keepalive 300
tcp-backlog 511

#------------------------------------------------------------------------------
# GENERAL
#------------------------------------------------------------------------------
daemonize no
supervised no
loglevel notice
databases 16

#------------------------------------------------------------------------------
# MEMORY MANAGEMENT
#------------------------------------------------------------------------------
maxmemory 512mb
maxmemory-policy allkeys-lru
maxmemory-samples 5

#------------------------------------------------------------------------------
# PERSISTENCE
#------------------------------------------------------------------------------
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

#------------------------------------------------------------------------------
# CLIENT MANAGEMENT
#------------------------------------------------------------------------------
maxclients 1000

#------------------------------------------------------------------------------
# SLOW LOG
#------------------------------------------------------------------------------
slowlog-log-slower-than 10000
slowlog-max-len 128

#------------------------------------------------------------------------------
# KEY EXPIRATION
#------------------------------------------------------------------------------
# Session keys expire in 24 hours by default
# Chat message cache expires in 1 hour
# User presence cache expires in 5 minutes